---
title: "OpenTelemetryのサンプリングについて"
emoji: "🦁"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

## 特定の API のトレースのみ 100%サンプリングしたい

## aaaa

- トレースの基礎知識がある
- 複数サービスの分散トレーシングに興味がある

## トレースの全体像

### サーバーの構成

ざっくりとした構成は以下のようになっています。

1. フロント（アプリ/Web）からのリクエストは HTTP で受け付ける
1. [grpc-gateway](https://github.com/grpc-ecosystem/grpc-gateway) を用いて、1 の HTTP リクエストを gRPC リクエストに変換し、gPRC サーバーに転送する
1. 複数のマイクロサービスが処理を行う

```mermaid
graph TD
    A["フロント<br/>(アプリ/Web)"] --> B["サービスA<br/>(HTTP受付 + grpc-gateway)"]
    B --> C["サービスB<br/>(マイクロサービス)"]
    B --> D["サービスC<br/>(マイクロサービス)"]
    B --> E["サービスD<br/>(マイクロサービス)"]

    style A fill:#e1f5fe
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style D fill:#f3e5f5
    style E fill:#f3e5f5
```

## サンプリングの種類

##
